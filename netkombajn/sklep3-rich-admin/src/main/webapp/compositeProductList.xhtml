<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:s3="http://netolution.pl/jsf/sklep3"
	xmlns:a4j="http://richfaces.org/a4j"
    xmlns:rich="http://richfaces.org/rich"	
	>
<ui:composition template="/admin_layout.xhtml">

<ui:define name="content">


<h1>Zestawy</h1>

		<h:form>
			<rich:dataTable value="#{compositeProductDao.all}" var="compositeProduct" 
        			rows="20">
			
			 <rich:column sortBy="#{compositeProduct.name}"> 
		               <f:facet name="header">
		                   Nazwa
		               </f:facet>
		              <h:commandLink action="compositeNew" styleClass="tableLink">#{compositeProduct.name}
				            		<f:setPropertyActionListener target="#{compositeBacking.compositeProduct}" value="#{compositeProduct}"/>
				       </h:commandLink>
		              <rich:toolTip>
               			<h:panelGroup>
		                		 <div class="detailsPopup">
		                			<div>Grupy zestawu : </div>
		                			
		                			<ui:repeat value="#{compositeProduct.productGroups}" var="group">
									 	<div><h:outputText value="#{group.name}" /></div>
									</ui:repeat>
									
								</div>
		                 </h:panelGroup>
               	 	 </rich:toolTip>
		        </rich:column>
		        <rich:column sortBy="#{compositeProduct.profitPercent}"> 
		               <f:facet name="header">
		                   Procent zysku
		               </f:facet>
		              #{compositeProduct.profitPercent} % 
		        </rich:column>
		        <rich:column sortBy="#{compositeProduct.numberOfGroups}"> 
		               <f:facet name="header">
		                   Liczba grup
		               </f:facet>
		              #{compositeProduct.numberOfGroups}
		        </rich:column>
		         <rich:column> 
		               <f:facet name="header">
		                   Usuń
		               </f:facet>
		              <h:commandLink actionListener="#{compositeBacking.deleteCompositeProduct}" styleClass="tableLink">
		            		<f:attribute name="compositeProduct" value="#{compositeProduct}"/>
		            		Usuń
		            	</h:commandLink>
		        </rich:column>	
			
			</rich:dataTable>
		   
		</h:form>


</ui:define>
</ui:composition>
</html>