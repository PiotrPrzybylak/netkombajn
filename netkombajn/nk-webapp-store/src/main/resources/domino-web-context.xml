<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:tx="http://www.springframework.org/schema/tx"
	xmlns:jndi="http://www.springframework.org/schema/jndi"
	xmlns:util="http://www.springframework.org/schema/util"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:aop="http://www.springframework.org/schema/aop"
	xmlns:flow="http://www.springframework.org/schema/webflow-config"	
	xsi:schemaLocation="http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
    http://www.springframework.org/schema/tx  
    http://www.springframework.org/schema/tx/spring-tx-2.0.xsd
    http://www.springframework.org/schema/jndi 
    http://www.springframework.org/schema/jndi/spring-jndi.xsd 
    http://www.springframework.org/schema/util 
    http://www.springframework.org/schema/util/spring-util-2.0.xsd
    http://www.springframework.org/schema/aop 
    http://www.springframework.org/schema/aop/spring-aop-2.0.xsd
	http://www.springframework.org/schema/webflow-config
	http://www.springframework.org/schema/webflow-config/spring-webflow-config-2.0.xsd">


	<bean name="/domino.html /main.html" class="pl.netolution.sklep3.web.controller.MainController" parent="baseController">
		<property name="viewName" value="domino_main" />
		<property name="shopService" ref="shopService"/>	
	</bean>
	
	<bean name="/revision.html" class="org.springframework.web.servlet.mvc.ParameterizableViewController">
		<property name="viewName" value="revision" />
	</bean>
	
	<!-- ==================================================================
-->
	<!-- Spring Web Flow stuff                                              -->
	<!-- ==================================================================
-->
	
	<bean name="/checkout-domino.html" class="org.springframework.webflow.mvc.servlet.FlowController">
		<property name="flowExecutor" ref="flowExecutorDomino"/>
	</bean>
	
	<flow:flow-executor id="flowExecutorDomino" flow-registry="flowRegistryDomino"/>
	
	<!-- This creates an XmlFlowRegistryFactory bean -->
	<flow:flow-registry id="flowRegistryDomino" flow-builder-services="flowBuilderServices">
		<flow:flow-location path="classpath:flows/checkout-domino.xml"/>		
	</flow:flow-registry>
	
	<bean name="orderModelValidator" class="webflow.validation.WebOrderValidator">
		<property name="validationService" ref="validationService" />
	</bean>	
	
	<bean name="loginFormValidator" class="webflow.validation.LoginWebFlowValidator">
		<property name="customerDao" ref="customerDao"/>
		<property name="encryptionService" ref="encryptionService" />
	</bean>
	
	<bean name="registrationFormValidator" class="webflow.validation.RegistrationWebFlowValidator">
		<property name="validationService" ref="validationService"/>
		<property name="customerDao" ref="customerDao"/>
	</bean>
</beans>